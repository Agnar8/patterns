# Decorator

Декоратор — это структурный паттерн, который позволяет добавлять объектам новые поведения на лету, помещая их в объекты-обёртки.

Расширение функционала без наследования, а с помощью композиции

Применяется когда нужно создать большой зоопарк подклассов.
Или когда нельзя нельзя расширить класс или сделать потомка
Или стремно, что-то изменять в классе

В общем, добавить ответсвенности обьекту класса, но не самому классу

Какбы оборачивает исходный обьект

Принимает объект и расширяет его

Декоратор позволяет оборачивать объекты бесчисленное количество раз благодаря тому, что и обёртки, и реальные оборачиваемые объекты имеют общий интерфейс.

Признаки применения паттерна: Декоратор можно распознать по создающим методам, которые принимают в параметрах объекты того же абстрактного типа или интерфейса, что и текущий класс.

### Всего 4 субьектов паттерна

- базовый интерфейс который имплементируют, все в этом списке
- базовый класс который будем декорировать
- базовый декоратор. В конструктор передается базовык класс или другой декоратор. Не забываем об едином интерфейсе
- наследник базового декоратора, уже конкретный декоратор

#### Базовый декоратор.
сохраняет внутри себя объект и отдает работу декоратору потомку
а тот переопределяет или дополняет функционал объекта интерфейса

<pre>class Decorator implements Component
{
    protected $component;

    public function __construct(Component $component)
    {
        $this->component = $component;
    }
    /**
     * Декоратор делегирует всю работу обёрнутому компоненту.
     */
    public function operation(): string
    {
        return $this->component->operation();
    }
} </pre>

#### Декоратор потомок
Конкретные Декораторы вызывают обёрнутый объект и изменяют его результат некоторым образом.

<pre>
class ConcreteDecoratorA extends Decorator
{
    /**
     * Декораторы могут вызывать родительскую реализацию операции, вместо того,
     * чтобы вызвать обёрнутый объект напрямую. Такой подход упрощает расширение
     * классов декораторов.
     */
    public function operation(): string
    {
        return "ConcreteDecoratorA(" . parent::operation() . ")";
    }
}</pre>